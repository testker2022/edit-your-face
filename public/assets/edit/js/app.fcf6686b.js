(function(){"use strict";var e={2922:function(e,t,l){var o=l(9242),n=l(3396);const r=(0,n._)("h1",null,"极客飞兔AI人脸编辑",-1),a=["src"],i={key:1,class:"el-icon-plus avatar-uploader-icon"},s={class:"block"};function u(e,t,l,o,u,c){const f=(0,n.up)("el-col"),d=(0,n.up)("el-row"),m=(0,n.up)("Warning"),p=(0,n.up)("el-icon"),g=(0,n.up)("el-tooltip"),h=(0,n.up)("Plus"),w=(0,n.up)("el-upload"),y=(0,n.up)("el-form-item"),v=(0,n.up)("el-option"),_=(0,n.up)("el-select"),b=(0,n.up)("el-slider"),k=(0,n.up)("el-button"),W=(0,n.up)("el-form"),O=(0,n.up)("el-divider"),j=(0,n.up)("el-image"),U=(0,n.up)("Picture"),x=(0,n.up)("el-card"),S=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.j4)(x,{shadow:"hover",style:{width:"70%","border-radius":"4px",margin:"5rem auto"},"element-loading-text":"所需大概一分钟，请耐心等待~"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,{span:22,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[r])),_:1})])),_:1}),(0,n.Wm)(d,{gutter:20},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{span:11},{default:(0,n.w5)((()=>[(0,n.Wm)(W,{ref:"form",model:u.form,"label-position":"left","label-width":"100px"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{label:"个人自拍"},{label:(0,n.w5)((()=>[(0,n._)("span",null,[(0,n.Uk)("个人自拍 "),(0,n.Wm)(g,{class:"item",effect:"dark",placement:"right",content:"尽量五官清晰，纯色背景"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{style:{"vertical-align":"middle"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1})])),_:1})])])),default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"avatar-uploader",action:"/upload","show-file-list":!1,"on-success":c.handleAvatarSuccess,"before-upload":c.beforeAvatarUpload},{default:(0,n.w5)((()=>[u.imageUrl?((0,n.wg)(),(0,n.iD)("img",{key:0,src:u.imageUrl,class:"avatar"},null,8,a)):((0,n.wg)(),(0,n.iD)("i",i,[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1})]))])),_:1},8,["on-success","before-upload"])])),_:1}),(0,n.Wm)(y,{label:"变换类型"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:u.form.style,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.style=e),placeholder:"请选择",style:{width:"100%"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.styles,((e,t)=>((0,n.wg)(),(0,n.j4)(v,{key:t,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(y,{label:"处理程度"},{label:(0,n.w5)((()=>[(0,n._)("span",null,[(0,n.Uk)("处理程度 "),(0,n.Wm)(g,{class:"item",effect:"dark",placement:"right",content:"数字越小处理程度越轻"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{style:{"vertical-align":"middle"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1})])),_:1})])])),default:(0,n.w5)((()=>[(0,n.Wm)(b,{modelValue:u.form.level,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.level=e),step:1,min:-15,max:15,"show-stops":""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{type:"flex",justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{type:"primary",onClick:c.editFace},{default:(0,n.w5)((()=>[(0,n.Uk)("生 成")])),_:1},8,["onClick"]),(0,n.Wm)(k,{onClick:c.cancel},{default:(0,n.w5)((()=>[(0,n.Uk)("重 置")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,n.Wm)(f,{span:1},{default:(0,n.w5)((()=>[(0,n.Wm)(O,{direction:"vertical",style:{height:"100%",margin:"auto"}})])),_:1}),(0,n.Wm)(f,{span:11},{default:(0,n.w5)((()=>[(0,n._)("div",s,[u.url?((0,n.wg)(),(0,n.j4)(j,{key:0,style:{width:"100%"},src:u.url,fit:e.cover},null,8,["src","fit"])):((0,n.wg)(),(0,n.j4)(p,{key:1,style:{"font-size":"10rem",height:"20rem",width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(U)])),_:1}))])])),_:1})])),_:1})])),_:1})),[[S,u.loading]])}var c={name:"App",components:{},data(){return{webhook:"ws://172.17.6.195:2345",socket:null,url:"",imageUrl:"",loading:!1,styles:{age:"年龄变换",eyes_open:"眼睛大小",eye_distance:"双眼距离",eye_eyebrow_distance:"眉毛距离",eye_ratio:"睫毛疏密",gender:"性别变换",lip_ratio:"脂肪数量",mouth_open:"嘴巴闭合",nose_mouth_distance:"嘴鼻间距",nose_ratio:"鼻梁挺拔",nose_tip:"鼻梁倾斜",smile:"笑容程度",pitch:"喉结大小",roll:"roll",yaw:"yaw"},form:{avatar:"",level:0,style:"age"}}},mounted(){this.init()},methods:{init(){"undefined"===typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket(this.webhook),this.socket.onmessage=this.onMessage,this.socket.onopen=this.onOpen,this.socket.onerror=this.onError,this.socket.onclose=this.onClose)},onMessage(e){let t=JSON.parse(e.data);console.log(t),this.$message.info(t.msg),200==t.code&&(this.loading=!1,this.url=t.url)},onOpen(){console.log("socket连接成功")},onError(e){console.error(e)},onClose(){console.log("socket已经关闭")},editFace(){if(!this.form.avatar)return this.$message.error("请先上传头像"),!1;this.loading=!0,this.socket.send(JSON.stringify(this.form))},handleAvatarSuccess(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.form.avatar=e.url},beforeAvatarUpload(e){return["image/jpeg","image/gif","image/png","image/jpg"].includes(e.type)?!(e.size/1024/1024>10)||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像格式错误!"),!1)},cancel(){this.form={avatar:"",level:0,style:"age"}}}},f=l(89);const d=(0,f.Z)(c,[["render",u]]);var m=d,p=l(4827),g=(l(4415),l(2119));const h=(0,o.ri)(m);for(const w in g)h.component(w,g[w]);h.use(p.Z).mount("#app")}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,l),r.exports}l.m=e,function(){var e=[];l.O=function(t,o,n,r){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],n=e[c][1],r=e[c][2];for(var i=!0,s=0;s<o.length;s++)(!1&r||a>=r)&&Object.keys(l.O).every((function(e){return l.O[e](o[s])}))?o.splice(s--,1):(i=!1,r<a&&(a=r));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,r,a=o[0],i=o[1],s=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(s)var c=s(l)}for(t&&t(o);u<a.length;u++)r=a[u],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(c)},o=self["webpackChunkeditmyface"]=self["webpackChunkeditmyface"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=l.O(void 0,[998],(function(){return l(2922)}));o=l.O(o)})();
//# sourceMappingURL=app.fcf6686b.js.map